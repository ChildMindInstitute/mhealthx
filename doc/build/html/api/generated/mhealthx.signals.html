<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mhealthx &mdash; mhealthx</title>
    
    <link rel="stylesheet" href="../../_static/mhealthx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '%s.%s.%s%s',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="mhealthx" href="../../index.html" />
  <HTML><head><title>mhealthx</title>
  <meta http-equiv="Content-language" content="en">
  <meta name="description" content="mhealthx">
  <meta name="keywords" content="mhealthx, mobile health, feature extraction">
  <meta name="author" content="mailto:arno&#64;sagebase.org">
  <meta name="dc.title" content="mhealthx"> 
  <meta name="dc.creator.address" content="arno&#64;sagebase.org">
  <meta name="dc.subject" content="mhealthx">
  <meta name="dc.type" content="text.homepage.research"> 
  <meta name="dc.format" content="text/html"> 
  <meta name="dc.identifier" content="http://binarybottle.github.io/mhealthx">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <table>
  <tr>
   <td>

 <a href="../../index.html">
  <img src="http://binarybottle.com/mpower/images/Sage_neon_logogram_icon.png" alt="small logo"  border="0" width="160"/-->
 </a>

   </td>
  <tr>
   <td>
   
   </td>
   <td>
 <a style="padding: 0px 0px 0px 20px; color: #00AA00; text-decoration: none; font-size: 32px"
  href="../../index.html">mhealthx</a>
   </td>
  </tr>
 </table>
</div>
  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="signals">
<h1>signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-mhealthx.signals">
<span id="module-signals"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">signals</span></code><a class="headerlink" href="#module-mhealthx.signals" title="Permalink to this headline">¶</a></h2>
<p>Signal processing functions from different sources.</p>
<dl class="docutils">
<dt>Authors:</dt>
<dd><ul class="first last simple">
<li>Arno Klein, 2015  (<a class="reference external" href="mailto:arno&#37;&#52;&#48;sagebase&#46;org">arno<span>&#64;</span>sagebase<span>&#46;</span>org</a>)  <a class="reference external" href="http://binarybottle.com">http://binarybottle.com</a></li>
<li>Elias Chaibub-Neto, 2015 (<a class="reference external" href="mailto:neto&#37;&#52;&#48;sagebase&#46;org">neto<span>&#64;</span>sagebase<span>&#46;</span>org</a>)</li>
</ul>
</dd>
</dl>
<p>Copyright 2015,  Sage Bionetworks (<a class="reference external" href="http://sagebase.org">http://sagebase.org</a>), Apache v2.0 License</p>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="mhealthx.signals.accelerometer_signal_quality">
<code class="descclassname">mhealthx.signals.</code><code class="descname">accelerometer_signal_quality</code><span class="sig-paren">(</span><em>gx</em>, <em>gy</em>, <em>gz</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.accelerometer_signal_quality" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute accelerometer signal quality.</p>
<dl class="docutils">
<dt>gx <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>x-axis gravity acceleration</dd>
<dt>gy <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>y-axis gravity acceleration</dd>
<dt>gz <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>z-axis gravity acceleration</dd>
</dl>
<dl class="docutils">
<dt>min_mse <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>minimum mean squared error</dd>
<dt>vertical <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>primary direction of vertical (&#8216;x&#8217;, &#8216;y&#8217;, or &#8216;z&#8217;)</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.xio</span> <span class="kn">import</span> <span class="n">read_accel_json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_file</span> <span class="o">=</span> <span class="s">&#39;/Users/arno/DriveWork/mhealthx/mpower_sample_data/deviceMotion_walking_outbound.json.items-a2ab9333-6d63-4676-977a-08591a5d837f5221783798792869048.tmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">device_motion</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start</span> <span class="o">=</span> <span class="mi">150</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">,</span> <span class="n">axyz</span><span class="p">,</span> <span class="n">gxyz</span><span class="p">,</span> <span class="n">uxyz</span><span class="p">,</span> <span class="n">rxyz</span><span class="p">,</span> <span class="n">sample_rate</span><span class="p">,</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">read_accel_json</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">device_motion</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gx</span><span class="p">,</span> <span class="n">gy</span><span class="p">,</span> <span class="n">gz</span> <span class="o">=</span> <span class="n">gxyz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">accelerometer_signal_quality</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_mse</span><span class="p">,</span> <span class="n">vertical</span> <span class="o">=</span> <span class="n">accelerometer_signal_quality</span><span class="p">(</span><span class="n">gx</span><span class="p">,</span> <span class="n">gy</span><span class="p">,</span> <span class="n">gz</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.autocorrelate">
<code class="descclassname">mhealthx.signals.</code><code class="descname">autocorrelate</code><span class="sig-paren">(</span><em>data</em>, <em>unbias=2</em>, <em>normalize=2</em>, <em>plot_test=False</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.autocorrelate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the autocorrelation coefficients for time series data.</p>
<p>Here we use scipy.signal.correlate, but the results are the same as in
Yang, et al., 2012 for unbias=1:
&#8220;The autocorrelation coefficient refers to the correlation of a time
series with its own past or future values. iGAIT uses unbiased
autocorrelation coefficients of acceleration data to scale the regularity
and symmetry of gait.
The autocorrelation coefficients are divided by fc(0) in Eq. (6),
so that the autocorrelation coefficient is equal to 1 when t=0</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">NFC</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">fc</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">/</span> <span class="n">fc</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Here NFC(t) is the normalised autocorrelation coefficient, and fc(t) are
autocorrelation coefficients.&#8221;</p>
<dl class="docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">numpy array</span></dt>
<dd>time series data</dd>
<dt>unbias <span class="classifier-delimiter">:</span> <span class="classifier">integer or None</span></dt>
<dd>unbiased autocorrelation: divide by range (1) or by weighted range (2)</dd>
<dt>normalize <span class="classifier-delimiter">:</span> <span class="classifier">integer or None</span></dt>
<dd>normalize: divide by 1st coefficient (1) or by maximum abs. value (2)</dd>
<dt>plot_test <span class="classifier-delimiter">:</span> <span class="classifier">Boolean</span></dt>
<dd>plot?</dd>
</dl>
<dl class="docutils">
<dt>coefficients <span class="classifier-delimiter">:</span> <span class="classifier">numpy array</span></dt>
<dd>[normalized, unbiased] autocorrelation coefficients</dd>
<dt>N <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>number of coefficients</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">autocorrelate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unbias</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalize</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_test</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coefficients</span><span class="p">,</span> <span class="n">N</span> <span class="o">=</span> <span class="n">autocorrelate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">unbias</span><span class="p">,</span> <span class="n">normalize</span><span class="p">,</span> <span class="n">plot_test</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.butter_lowpass_filter">
<code class="descclassname">mhealthx.signals.</code><code class="descname">butter_lowpass_filter</code><span class="sig-paren">(</span><em>data</em>, <em>sample_rate</em>, <em>cutoff=10</em>, <em>order=4</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.butter_lowpass_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Low-pass filter data by the [order]th order zero lag Butterworth filter
whose cut frequency is set to [cutoff] Hz.</p>
<p>After <a class="reference external" href="http://stackoverflow.com/questions/25191620/">http://stackoverflow.com/questions/25191620/</a>
creating-lowpass-filter-in-scipy-understanding-methods-and-units</p>
<dl class="docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of floats</span></dt>
<dd>time-series data</dd>
<dt>sample_rate <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>data sample rate</dd>
<dt>cutoff <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>filter cutoff</dd>
<dt>order <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>order</dd>
</dl>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of floats</span></dt>
<dd>low-pass-filtered data</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">butter_lowpass_filter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_rate</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cutoff</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">order</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">butter_lowpass_filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sample_rate</span><span class="p">,</span> <span class="n">cutoff</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.compute_cv">
<code class="descclassname">mhealthx.signals.</code><code class="descname">compute_cv</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.compute_cv" title="Permalink to this definition">¶</a></dt>
<dd><p>cv = 100 * np.std(x) / np.mean(x)</p>
<p>x : list or array of floats</p>
<p>cv : float</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">compute_cv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cv</span> <span class="o">=</span> <span class="n">compute_cv</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.compute_interpeak">
<code class="descclassname">mhealthx.signals.</code><code class="descname">compute_interpeak</code><span class="sig-paren">(</span><em>data</em>, <em>sample_rate</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.compute_interpeak" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute number of samples between signal peaks using the real part of FFT.</p>
<dl class="docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">list or numpy array</span></dt>
<dd>time series data</dd>
<dt>sample_rate <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>sample rate of accelerometer reading (Hz)</dd>
</dl>
<dl class="docutils">
<dt>interpeak <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>number of samples between peaks</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">compute_interpeak</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_rate</span> <span class="o">=</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interpeak</span> <span class="o">=</span> <span class="n">compute_interpeak</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sample_rate</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.compute_mean_teagerkaiser_energy">
<code class="descclassname">mhealthx.signals.</code><code class="descname">compute_mean_teagerkaiser_energy</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.compute_mean_teagerkaiser_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Teager-Kaiser energy operator</p>
<p>(from TKEO function in R library(seewave) using f = 1, m = 1, M = 1)</p>
<p>x : numpy array of floats</p>
<p>tk_energy : float</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">compute_mean_teagerkaiser_energy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tk_energy</span> <span class="o">=</span> <span class="n">compute_mean_teagerkaiser_energy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.compute_median_abs_dev">
<code class="descclassname">mhealthx.signals.</code><code class="descname">compute_median_abs_dev</code><span class="sig-paren">(</span><em>X</em>, <em>W=[]</em>, <em>precision=1</em>, <em>c=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.compute_median_abs_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the (weighted) median absolute deviation.</p>
<p>mad = median(abs(x - median(x))) / c</p>
<dl class="docutils">
<dt>X <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of floats or integers</span></dt>
<dd>values</dd>
<dt>W <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of floats or integers</span></dt>
<dd>weights</dd>
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>number of decimal places to consider weights</dd>
<dt>c <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>constant used as divisor for mad computation;
c = 0.6745 is used to convert from mad to standard deviation</dd>
</dl>
<dl class="docutils">
<dt>mad <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>(weighted) median absolute deviation</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">compute_median_abs_dev</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">W</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># [1, 2, 4, 4, 4, 7, 7, 8, 8, 8]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_median_abs_dev</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span> <span class="n">precision</span><span class="p">)</span>
<span class="go">    2.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.compute_sample_rate">
<code class="descclassname">mhealthx.signals.</code><code class="descname">compute_sample_rate</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.compute_sample_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute sample rate.</p>
<dl class="docutils">
<dt>t <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>time points</dd>
</dl>
<dl class="docutils">
<dt>sample_rate <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>sample rate</dd>
<dt>duration <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>duration of time series</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">compute_sample_rate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_rate</span><span class="p">,</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">compute_sample_rate</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.compute_stats">
<code class="descclassname">mhealthx.signals.</code><code class="descname">compute_stats</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.compute_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute statistical summaries of data.</p>
<p>x : list or array of floats</p>
<dl class="docutils">
<dt>num <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>number of elements</dd>
<dt>min <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>minimum</dd>
<dt>max <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>maximum</dd>
<dt>rng <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>range</dd>
<dt>avg <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>mean</dd>
<dt>std <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>standard deviation</dd>
<dt>med <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>median</dd>
<dt>mad <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>median absolute deviation</dd>
<dt>kurt <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>kurtosis</dd>
<dt>skew <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>skewness</dd>
<dt>cvar <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>coefficient of variation</dd>
<dt>lower25 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>lower quartile</dd>
<dt>upper25 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>upper quartile</dd>
<dt>inter50 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>interquartile range</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">compute_stats</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="n">rng</span><span class="p">,</span> <span class="n">avg</span><span class="p">,</span> <span class="n">std</span><span class="p">,</span> <span class="n">med</span><span class="p">,</span> <span class="n">mad</span><span class="p">,</span> <span class="n">kurt</span><span class="p">,</span> <span class="n">skew</span><span class="p">,</span> <span class="n">cvar</span><span class="p">,</span> <span class="n">lower25</span><span class="p">,</span> <span class="n">upper25</span><span class="p">,</span> <span class="n">inter50</span> <span class="o">=</span> <span class="n">compute_stats</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.crossings_nonzero_pos2neg">
<code class="descclassname">mhealthx.signals.</code><code class="descname">crossings_nonzero_pos2neg</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.crossings_nonzero_pos2neg" title="Permalink to this definition">¶</a></dt>
<dd><p>Find indices of zero crossings from positive to negative values.</p>
<dl class="docutils">
<dt>From: <a class="reference external" href="http://stackoverflow.com/questions/3843017/">http://stackoverflow.com/questions/3843017/</a></dt>
<dd>efficiently-detect-sign-changes-in-python</dd>
</dl>
<p>data : numpy array of floats</p>
<dl class="docutils">
<dt>crossings <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of integers</span></dt>
<dd>crossing indices to data</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">crossings_nonzero_pos2neg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crossings</span> <span class="o">=</span> <span class="n">crossings_nonzero_pos2neg</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.gravity_min_mse">
<code class="descclassname">mhealthx.signals.</code><code class="descname">gravity_min_mse</code><span class="sig-paren">(</span><em>gx</em>, <em>gy</em>, <em>gz</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.gravity_min_mse" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute QC score based on gravity acceleration only.</p>
<p>Elias Chaibub-Neto used this to find gross rotations of the phone.</p>
<dl class="docutils">
<dt>gx <span class="classifier-delimiter">:</span> <span class="classifier">list or numpy array</span></dt>
<dd>x-axis gravity accelerometer data</dd>
<dt>gy <span class="classifier-delimiter">:</span> <span class="classifier">list or numpy array</span></dt>
<dd>y-axis gravity accelerometer data</dd>
<dt>gz <span class="classifier-delimiter">:</span> <span class="classifier">list or numpy array</span></dt>
<dd>z-axis gravity accelerometer data</dd>
</dl>
<dl class="docutils">
<dt>min_mse <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>minimum mean squared error</dd>
<dt>vertical <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>primary direction of vertical (&#8216;x&#8217;, &#8216;y&#8217;, or &#8216;z&#8217;)</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.xio</span> <span class="kn">import</span> <span class="n">read_accel_json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_file</span> <span class="o">=</span> <span class="s">&#39;/Users/arno/DriveWork/mhealthx/mpower_sample_data/deviceMotion_walking_outbound.json.items-a2ab9333-6d63-4676-977a-08591a5d837f5221783798792869048.tmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">device_motion</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start</span> <span class="o">=</span> <span class="mi">150</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">,</span> <span class="n">axyz</span><span class="p">,</span> <span class="n">gxyz</span><span class="p">,</span> <span class="n">uxyz</span><span class="p">,</span> <span class="n">rxyz</span><span class="p">,</span> <span class="n">sample_rate</span><span class="p">,</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">read_accel_json</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">device_motion</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gx</span><span class="p">,</span> <span class="n">gy</span><span class="p">,</span> <span class="n">gz</span> <span class="o">=</span> <span class="n">gxyz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">gravity_min_mse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_mse</span><span class="p">,</span> <span class="n">vertical</span> <span class="o">=</span> <span class="n">gravity_min_mse</span><span class="p">(</span><span class="n">gx</span><span class="p">,</span> <span class="n">gy</span><span class="p">,</span> <span class="n">gz</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.parabolic">
<code class="descclassname">mhealthx.signals.</code><code class="descname">parabolic</code><span class="sig-paren">(</span><em>f</em>, <em>x</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.parabolic" title="Permalink to this definition">¶</a></dt>
<dd><p>Quadratic interpolation for estimating the true position of an
inter-sample maximum when nearby samples are known.</p>
<dl class="docutils">
<dt>From: <a class="reference external" href="https://gist.github.com/endolith/255291">https://gist.github.com/endolith/255291</a> and</dt>
<dd><a class="reference external" href="https://github.com/endolith/waveform-analyzer">https://github.com/endolith/waveform-analyzer</a></dd>
</dl>
<dl class="docutils">
<dt>f <span class="classifier-delimiter">:</span> <span class="classifier">list or array</span></dt>
<dd>vector</dd>
<dt>x <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>index for vector f</dd>
</dl>
<dl class="docutils">
<dt>(vx, vy) <span class="classifier-delimiter">:</span> <span class="classifier">floats</span></dt>
<dd>coordinates of the vertex of a parabola that goes through point x
and its two neighbors</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">parabolic</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Define a vector f with a local maximum at index 3 (= 6); find local</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># maximum if points 2, 3, and 4 actually defined a parabola.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parabolic</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">argmax</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Out[4]: (3.2142857142857144, 6.1607142857142856)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.root_mean_square">
<code class="descclassname">mhealthx.signals.</code><code class="descname">root_mean_square</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.root_mean_square" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute root mean square of data.</p>
<p>from Yang, et al., 2012:
&#8220;The root mean square of acceleration indicates the intensity of motion.
The RMS values of the three acceleration directions (VT, AP and ML)
are calculated as: RMS_d = sqrt( (sum[i=1:N](xdi - [xd])^2 / N) )
where xdi (i = 1,2,...,N; d = VT,AP,ML) is the acceleration in either
the VT, AP or ML axis, N is the length of the acceleration signal,
[xd] is the mean value of acceleration in any axis.&#8221;</p>
<p>data : numpy array of floats</p>
<dl class="docutils">
<dt>rms <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>root mean square</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">root_mean_square</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rms</span> <span class="o">=</span> <span class="n">root_mean_square</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.signal_features">
<code class="descclassname">mhealthx.signals.</code><code class="descname">signal_features</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.signal_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract various features from time series data.</p>
<dl class="docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of floats</span></dt>
<dd>time series data</dd>
</dl>
<dl class="docutils">
<dt>num <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>number of elements</dd>
<dt>min <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>minimum</dd>
<dt>max <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>maximum</dd>
<dt>rng <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>range</dd>
<dt>avg <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>mean</dd>
<dt>std <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>standard deviation</dd>
<dt>med <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>median</dd>
<dt>mad <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>median absolute deviation</dd>
<dt>kurt <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>kurtosis</dd>
<dt>skew <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>skewness</dd>
<dt>cvar <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>coefficient of variation</dd>
<dt>lower25 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>lower quartile</dd>
<dt>upper25 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>upper quartile</dd>
<dt>inter50 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>interquartile range</dd>
<dt>rms <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>root mean squared error</dd>
<dt>entropy <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>entropy measure</dd>
<dt>tk_energy <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>mean Teager-Kaiser energy</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">signal_features</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num</span><span class="p">,</span> <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">,</span> <span class="n">rng</span><span class="p">,</span> <span class="n">avg</span><span class="p">,</span> <span class="n">std</span><span class="p">,</span> <span class="n">med</span><span class="p">,</span> <span class="n">mad</span><span class="p">,</span> <span class="n">kurt</span><span class="p">,</span> <span class="n">skew</span><span class="p">,</span> <span class="n">cvar</span><span class="p">,</span> <span class="n">lower25</span><span class="p">,</span> <span class="n">upper25</span><span class="p">,</span> <span class="n">inter50</span><span class="p">,</span> <span class="n">rms</span><span class="p">,</span> <span class="n">entropy</span><span class="p">,</span> <span class="n">tk_energy</span> <span class="o">=</span> <span class="n">signal_features</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="mhealthx.signals.weighted_to_repeated_values">
<code class="descclassname">mhealthx.signals.</code><code class="descname">weighted_to_repeated_values</code><span class="sig-paren">(</span><em>X</em>, <em>W=[]</em>, <em>precision=1</em><span class="sig-paren">)</span><a class="headerlink" href="#mhealthx.signals.weighted_to_repeated_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a list of repeated values from weighted values.</p>
<p>This is useful for computing weighted statistics (ex: weighted median).</p>
<dl class="docutils">
<dt>Adapted to allow for fractional weights from</dt>
<dd><dl class="first last docutils">
<dt><a class="reference external" href="http://stackoverflow.com/questions/966896/">http://stackoverflow.com/questions/966896/</a></dt>
<dd>code-golf-shortest-code-to-find-a-weighted-median</dd>
</dl>
</dd>
</dl>
<dl class="docutils">
<dt>X <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of floats or integers</span></dt>
<dd>values</dd>
<dt>W <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of floats or integers</span></dt>
<dd>weights</dd>
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">integer</span></dt>
<dd>number of decimal places to consider weights</dd>
</dl>
<dl class="docutils">
<dt>repeat_values <span class="classifier-delimiter">:</span> <span class="classifier">numpy array of floats or integers</span></dt>
<dd>repeated values according to their weight</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">mhealthx.signals</span> <span class="kn">import</span> <span class="n">weighted_to_repeated_values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">W</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span><span class="o">.</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weighted_to_repeated_values</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span> <span class="n">precision</span><span class="p">)</span>
<span class="go">    [1, 2, 4, 4, 4, 7, 7, 8, 8, 8]</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
<!-- Google Analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-693862-13");
pageTracker._trackPageview();
} catch(err) {}
</script>

  </body>
</html>